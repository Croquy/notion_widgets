<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Syst√®me Officiel de R√©gulation Adolescente‚Ñ¢</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f4f4f4;
  }

  .container {
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }

  h2 {
    text-align: center;
    margin-bottom: 20px;
  }

  .button-group {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }

  button {
    flex: 1 1 200px;
    padding: 14px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    background-color: #333;
    color: white;
    cursor: pointer;
    transition: background 0.2s ease;
    min-width: 0;
  }

  button:hover {
    background-color: #555;
  }

  #result {
    margin-top: 25px;
    padding: 15px;
    border-radius: 8px;
    line-height: 1.6;
  }

  .low { background-color: #e6f7e6; color: #0a7a0a; font-weight: bold; }
  .medium { background-color: #fff4e6; color: #b36b00; font-weight: bold; }
  .high { background-color: #ffe6e6; color: #b30000; font-weight: bold; }
  .critical { background-color: #3b0000; color: white; font-weight: bold; }

  /* Mobile optimization */
  @media (max-width: 600px) {
    body { padding: 10px; }
    .container { padding: 15px; }
    .button-group {
      grid-template-columns: 1fr;
    }
    button { 
      font-size: 15px; 
      padding: 12px; 
      width: 100%;
    }
    #result { font-size: 15px; }
  }
    .container { padding: 15px; }
    button { 
      font-size: 15px; 
      padding: 12px; 
      flex: 1 1 100%;
    }
    #result { font-size: 15px; }
  }
    .container { padding: 15px; }
    button { font-size: 15px; padding: 12px; }
    #result { font-size: 15px; }
  }


/* ============================= */
/* THEATRALITE - SANCTION ROYALE */
/* ============================= */

@keyframes royalAppear {
  0% {
    opacity: 0;
    transform: scale(0.9);
    filter: blur(4px);
  }
  60% {
    transform: scale(1.03);
  }
  100% {
    opacity: 1;
    transform: scale(1);
    filter: blur(0);
  }
}

@keyframes royalShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  50% { transform: translateX(6px); }
  75% { transform: translateX(-4px); }
}

@keyframes darkPulse {
  0% { box-shadow: 0 0 10px rgba(139, 0, 0, 0.5); }
  50% { box-shadow: 0 0 35px rgba(139, 0, 0, 0.9); }
  100% { box-shadow: 0 0 10px rgba(139, 0, 0, 0.5); }
}

.intolerable {
  background: linear-gradient(135deg, #3b0000, #1a0000);
  border: 0px solid #8b0000;
  color: #ffeaea;
  animation:
    royalAppear 0.5s ease-out forwards,
    royalShake 0.4s ease-in-out 0.5s,
    darkPulse 2s infinite 1s;
}

/* Effet decret qui se revele */
@keyframes decreeReveal {
  from { width: 0; }
  to { width: 100%; }
}

.decree-text {
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid #ffeaea;
  animation: decreeReveal 1.5s steps(40, end) forwards;
}

</style>
</head>
<body>

<div class="container">

<h2>‚öñÔ∏è Syst√®me Officiel de R√©gulation Adolescente‚Ñ¢</h2>

<div class="button-group">
  <button onclick="handleCase('repetition')">Demande r√©p√©titive</button>
  <button onclick="handleCase('impulsif')">Demande sans r√©fl√©chir</button>
  <button onclick="handleCase('insolence')">Insolence</button>
  <button onclick="handleCase('mensonge')">Mensonge</button>
  <button onclick="handleCase('refus')">Refus d‚Äôob√©ir</button>
</div>

<div id="result"></div>

</div>

<script>

const cases = {
  repetition: { gravity: "üü¢ Gravit√© : Faible", class: "low", level: 1 },
  impulsif: { gravity: "üü¢ Gravit√© : Faible", class: "low", level: 2 },
  insolence: { gravity: "üü† Gravit√© : Moyenne", class: "medium", level: 3 },
  mensonge: { gravity: "üî¥ Gravit√© : √âlev√©e", class: "high", level: 4 },
  refus: { gravity: "‚õî Gravit√© : Intol√©rable", class: "critical", level: 5 }
};

const reformulations = {
  repetition: [
    "Demande d√©j√† trait√©e r√©introduite sans √©l√©ment nouveau.",
    "Strat√©gie d‚Äôusure psychologique d√©tect√©e.",
    "Requ√™te r√©currente sans modification du contexte.",
    "Tentative de r√©p√©tition persuasive identifi√©e."
  ],
  impulsif: [
    "Demande formul√©e sans analyse pr√©alable des cons√©quences.",
    "Proposition spontan√©e sans √©tude de faisabilit√©.",
    "Expression d‚Äôun besoin imm√©diat non structur√©.",
    "Initiative pr√©cipit√©e sans projection r√©aliste."
  ],
  insolence: [
    "Expression verbale √† tonalit√© inappropri√©e d√©tect√©e.",
    "Remise en question du cadre parental identifi√©e.",
    "Usage d‚Äôun registre discursif non conforme au cadre familial.",
    "D√©bordement √©motionnel orient√© vers contestation."
  ],
  mensonge: [
    "Alt√©ration volontaire de la v√©rit√© constat√©e.",
    "Narratif divergent de la r√©alit√© observ√©e.",
    "Construction factuelle inexacte identifi√©e.",
    "Dissimulation partielle d‚Äôinformations."
  ],
  refus: [
    "Non-ex√©cution d‚Äôune directive parentale valid√©e.",
    "Blocage op√©rationnel dans l‚Äôapplication des consignes.",
    "Refus explicite d‚Äôadh√©sion aux r√®gles √©tablies.",
    "Opposition active au cadre √©ducatif."
  ]
};

const lowPunishments = [
  "Pr√©parer un caf√© ou un th√© au parent r√©f√©rent.",
  "Offrir un massage de 5 minutes.",
  "Faire un c√¢lin officiel et sinc√®re.",
  "R√©aliser un dessin personnalis√©.",
  "Aider spontan√©ment sur une petite t√¢che domestique."
];

const characters = ["un chevalier", "une princesse", "un ninja", "un pirate","un chat", "un roi", "une f√©e"];

function generateThemedLetter() {
  const char = randomItem(characters);
  return `Excuse toi comme si tu √©tais ${char}.`;
}

const highPunishments = [
  "Privation d‚Äô√©cran pendant 48h.",
  "Nettoyage complet de la chambre sous supervision.",
  "Rangement complet de la salle de jeux.",
  "T√¢ches m√©nag√®res suppl√©mentaires."
];

const medievalPunishments = {
    1: [
    "Balayage de l‚Äôentr√©e du ch√¢teau.",
    "Nuit √† la belle √©toile dans la cour avec couverture et coussin rudimentaire.",
    "Pr√©paration d‚Äôune infusion d‚Äôherbes du jardin royal.",
    "Aide aux jardiniers pour arroser les plantes du domaine."
  ],
  2: [
    "Nettoyage int√©gral des √©curies royales et ramassage officiel du crottin.",
    "Nuit dans l‚Äô√©curie avec couverture r√™che et paille r√©glementaire.",
    "Consommation d‚Äôune soupe d‚Äôorties pr√©par√©e selon la tradition ancestrale.",
    "Service comme porteur d‚Äôeau au puits du village durant une demi-journ√©e."
  ],
  3: [
    "Corv√©e prolong√©e dans les cuisines du ch√¢teau sous supervision du ma√Ætre queux.",
    "R√©daction publique d‚Äôun serment d‚Äôhonneur devant la cour familiale.",
    "Veill√©e obligatoire dans la tour de garde pour m√©ditation sur le respect.",
    "Balayage complet de la grande salle du ch√¢teau √† l‚Äôaube."
  ],
  4: [
    "Enfermement dans les oubliettes du royaume pour r√©flexion intensive.",
    "Transformation imaginaire en grenouille pour une dur√©e ind√©termin√©e, coassement inclus.",
    "Exil temporaire au sommet de la Tour des Devoirs Infinis avec r√©citation du code parental.",
    "Service forc√© comme √©cuyer du parent souverain avec r√©v√©rence protocolaire."
  ],
  5: [
    "Bannissement dramatique du royaume familial jusqu‚Äô√† preuve de loyaut√© retrouv√©e.",
    "Condamnation √† la Grande Qu√™te du Rangement √âternel jusqu‚Äô√† restauration compl√®te de l‚Äôhonneur.",
    "M√©tamorphose l√©gendaire en cr√©ature des marais pendant quarante jours symboliques.",
    "Jugement solennel devant le Conseil Supr√™me des Parents avec sentence irr√©vocable."
  ]
};
const personnages = ["ninja", "astronaute", "chevalier", "hacker", "capitaine de vaisseau", "apprenti sorcier"];
const autorites = ["roi", "commandant", "dragon ancestral", "reine pirate", "ma√Ætre du temple", "IA supr√™me"];
const situations = ["mission critique", "tournoi d√©cisif", "conseil royal", "exp√©dition dangereuse", "qu√™te sacr√©e"];


function genererInsolence() {
  const perso = randomItem(personnages);
  const autorite = randomItem(autorites);
  const situation = randomItem(situations);

  return  `
    <div class="card">
      <h2>Insolence - Exercice narratif</h2>
      <p><strong>1.</strong> D√©cris pr√©cis√©ment ce que tu as dit ou fait.</p>
      <p><strong>2.</strong> Invente une histoire o√π un ${perso} se montre insolent envers un ${autorite} lors d'une ${situation}.</p>
      <p>Montre les cons√©quences et l'√©volution de la situation.</p>
      <p><strong>3.</strong> √âcris la morale : que devait faire le ${perso} diff√©remment ?</p>
    </div>
  `;
}

function genererMensonge() {
  const perso = randomItem(personnages);
  const autorite = randomItem(autorites);
  const situation = randomItem(situations);

 return  `
    <div class="card">
      <h2>Mensonge - Exercice confiance</h2>
      <p><strong>1.</strong> R√©sume les faits sans justification.</p>
      <p><strong>2.</strong> Invente une histoire o√π un ${perso} cache la v√©rit√© √† un ${autorite} pendant une ${situation}.</p>
      <p>D√©cris l'effet domino et les cons√©quences sur la confiance.</p>
      <p><strong>3.</strong> Pr√©sente ton histoire √† l‚Äôoral en 3 minutes et explique la morale.</p>
    </div>
  `;
}
function randomItem(array) {
  return array[Math.floor(Math.random() * array.length)];
}

function handleCase(type) {
  const caseInfo = cases[type];
  const reformulation = randomItem(reformulations[type]);

  let punishment;

  if (caseInfo.level === 1) {
    punishment = randomItem(lowPunishments);
  }
  else if (caseInfo.level === 2) {
    punishment = generateThemedLetter();
  }
    else if (caseInfo.level === 3) {
    punishment = genererInsolence();
  }
   else if (caseInfo.level === 4) {
    punishment = genererMensonge();
  }
  else  {
    punishment = randomItem(highPunishments);
  }

  const medieval = randomItem(medievalPunishments[caseInfo.level]);

  let resultHTML = `
  <div class="result-card">
    <div class="gravity">${caseInfo.gravity}</div>
    <div class="section">
      <h3>üìå Analyse</h3>
      <p>${reformulation}</p>
    </div>
    <div class="section">
      <h3>üõë Sanction</h3>
      ${typeof punishment === 'string' && punishment.startsWith('<div') ? punishment : `<p>${punishment}</p>`}
    </div>
    <div class="section">
      <h3>üè∞ Sentence m√©di√©vale correspondante</h3>
      <p>${medieval}</p>
    </div>
  </div>
  `;

  const resultDiv = document.getElementById("result");
  resultDiv.className = caseInfo.class;
  resultDiv.innerHTML = resultHTML;

  // Animation uniquement sur la gravit√©
  if(caseInfo.level >3){
    const gravityEl = resultDiv.querySelector('.gravity');
    if(gravityEl){
      gravityEl.classList.add('intolerable');
    }
  }
}

</script>


</body>
</html>
