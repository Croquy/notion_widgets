<!-- original : https://codepen.io/SeanNorton/pen/LWBXQL -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style>
      /*CSS RESETS*/

      body {
        background-color: #fff;
        line-height: 1.6;
        font-family: "Oooh Baby", cursive;
      }

      h1 {
        margin-top: 0;
      }

      /*CSS START*/

      .full-table {
        display: table;
        height: 100%;
        width: 100%;
      }

      .table-cell {
        display: table-cell;
        vertical-align: middle;
        text-align: center;
      }

      .card {
        padding: 10px 25px 10px 25px;
        border-radius: 10px;
        background: #009688;
        color: #fff;
        display: inline-block;
        box-shadow: 2px 2px 1px 0px #295c7b;
      }

      .card:hover {
        margin-top: 2px;
        box-shadow: none;
      }

      .date {
        display: block;
        min-width: 162px;
        /* padding-right: 30px; */
        /* border-right: 2px solid #295C7B; */
        font-family: "Roboto", sans-serif;
        font-size: 1.2em;
      }
      .greet {
        min-width: 162px;
        /* padding-right: 30px; */
        font-family: "Oooh Baby", cursive;
        font-size: 1.2em;
      }
    </style>
    <style>
      .container {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .item {
        background: rgba(66, 133, 244, 0.9);
        padding: 5px;
        width: 200px;
        height: 150px;
        margin: 10px;
        line-height: 150px;
        color: white;
        font-weight: bold;
        font-size: 2em;
        text-align: center;
        border-radius: 10px;
      }
      .float {
        max-width: 700px;
        margin: 0 auto;
      }
      .float:after {
        content: ".";
        display: block;
        height: 0;
        clear: both;
        visibility: hidden;
      }
      .float-item {
        float: left;
      }
    </style>
  </head>
  <body>
    <link href="style.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css?family=Lobster|Roboto:400,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Oooh+Baby&display=swap"
      rel="stylesheet"
    />

    <div class="full-table">
      <div class="table-cell">
        <div class="card">
          <div class="date" id="date"></div>
          <div class="clock">
            <span class="horloge" id="horloge"></span>
            <div class="hand hours" id="aig_h"></div>
            <div class="hand minutes" id="aig_m"></div>
            <div class="hand seconds" id="aig_s"></div>
            <div class="point"></div>
            <div class="marker">
              <span class="marker__1"></span>
              <span class="marker__2"></span>
              <span class="marker__3"></span>
              <span class="marker__4"></span>
            </div>
          </div>
        </div>
      </div>
      <ul class="container float">
        <li class="item float-item" id="h_j">Jour</li>
        <li class="item float-item" id="h_h">Hebdomadaire</li>
        <a href="https://kayoo123.github.io/astroo-api/mensuel.json"
          ><li class="item float-item" id="h_m">Mensuel</li></a
        >
      </ul>
    </div> 

    <script>
      var url = "https://kayoo123.github.io/astroo-api/jour.json";
      
      window.fetch(url).then(function (response) {
          return response.json();
        }).then(function (json) { 
          return doSomethingWith("h_j",json);
        }); 
      window.fetch("https://kayoo123.github.io/astroo-api/hebdomadaire.json").then(function (response) {
          return response.json();
        }).then(function (json) {
          
          return doSomethingWith("h_h",json);
        });  
      function  doSomethingWith(nom,json){
        document.getElementById(nom).innerHTML(json.vierge) 
      }
 
      const span_h = document.getElementById("aig_h");
      const span_m = document.getElementById("aig_m");
      const span_s = document.getElementById("aig_s");
      const span_horloge = document.getElementById("horloge");
      const span_date = document.getElementById("date");
      const options = {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
      };
      function clock() {
        var today = new Date();
        hrs = today.getHours();
        if (hrs < 12) greet = "Bonjour";
        else if (hrs >= 12 && hrs <= 17) greet = "Bon après midi ";
        else if (hrs >= 17 && hrs <= 24) greet = "Bonne soirée  ";
        span_date.innerHTML =greet +" nous sommes le " +today.toLocaleDateString("fr-FR", options);
        span_horloge.innerText =zeros(today.getHours()) +":" +zeros(today.getMinutes()) +":" +zeros(today.getSeconds());
        var h = ((today.getHours() % 12) + today.getMinutes() / 59) * 30; // 22 % 12 = 10pm
        span_h.style.transform = `rotate(${h}deg)`;
        span_m.style.transform = "rotate(" + today.getMinutes() * 6 + "deg)";
        span_s.style.transform = "rotate(" + today.getSeconds() * 6 + "deg)";
      }

      // adds zero infront of single digit number
      function zeros(num) {
        if (num < 10) {
          num = "0" + num;
        }
        return num;
      }

      function dateTime() { 
        clock();
        setTimeout(dateTime, 500);
      }

      dateTime();
      // END
    </script>
  </body>
</html>
