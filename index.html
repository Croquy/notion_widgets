<!-- original : https://codepen.io/SeanNorton/pen/LWBXQL -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link href="style.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css?family=Lobster|Roboto:400,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Oooh+Baby&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        line-height: 1.6;
        font-family: "Oooh Baby" !important;
        align-items: center;
  background: radial-gradient(ellipse at center, rgba(255,179,206,0) 0%, rgba(255,180,199,0) 43%, rgba(255,181,189,0.43) 100%)  !important;
  background-attachment: fixed;
  background-repeat: no-repeat;
  display: flex;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00ffb3ce', endColorstr='#6effb5bd', GradientType=1);
  flex-direction: column; 
  height: 100vh;
  justify-content: center;
  min-width: 184px;
  overflow-x: hidden;
  transition: background-color .2s;
      }
 
    </style>
  </head>
  <body  >
    <div class="container-fluid ">
      <div class="row">
        <div class="col ">
          <div class="cadre h-100">
            <div class="date" id="date"></div>
            <div class="clock">
              <span class="horloge" id="horloge"></span>
              <div class="hand hours" id="aig_h"></div>
              <div class="hand minutes" id="aig_m"></div>
              <div class="hand seconds" id="aig_s"></div>
              <div class="semaine" id="semaine"></div>
              <div class="point"></div>
              <div class="marker">
                <span class="marker__1"></span>
                <span class="marker__2"></span>
                <span class="marker__3"></span>
                <span class="marker__4"></span>
              </div>
            </div>
          </div>
        </div>
        <div class="col"> 
          <a
            class="weatherwidget-io"
            href="https://forecast7.com/fr/45d994d72/villefranche-sur-saone/"
            data-label_1="VILLEFRANCHE-SUR-SAONE"
            data-font="Open Sans"
            data-icons="Climacons Animated"
            data-days="5"
            data-theme="hexellence"
            data-textcolor="#64a9b7"
            data-suncolor="#feffa4"
            data-cloudcolor="#93b8ed"
            >VILLEFRANCHE-SUR-SAONE</a
          > 
      </div>
           
    
        <div class="col">
          <div class="cadre h-100">
          <nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Aujourd'hui</button>
    <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Hebdo</button>
    <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#nav-contact" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">Calc</button>
  </div>
</nav>
<div class="tab-content " id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab"><span id="h_j"></span></div>
  <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab"  ><span id="h_h"></span></div>
  <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
   <include src="./calculator.html"></include>
  </div></div>
</div>
         
         
    </div>
    <script>
      window
        .fetch("https://kayoo123.github.io/astroo-api/jour.json")
        .then(function (response) {
          return response.json();
        })
        .then(function (json) {
          return doSomethingWith("h_j", json);
        });
    /*  window
        .fetch("https://kayoo123.github.io/astroo-api/hebdomadaire.json")
        .then(function (response) {
          return response.json();
        })
        .then(function (json) {
          return doSomethingWith("h_h", json);
        });*/
    
      function doSomethingWith(nom, json) {
        document.getElementById(nom).innerHTML = json.vierge;
      }
      function translate(text){
        const res =  fetch("https://libretranslate.com/translate", {
        method: "POST",
        body: JSON.stringify({
          q: text,
          source: "auto",
          target: "fr",
          format: "text",
          api_key: ""
        }),
        headers: { "Content-Type": "application/json" }
      });
     return  res.json().translatedText;
      }
      function horos(){
       fetch("https://horoscope-app-api.vercel.app/api/v1/get-horoscope/daily?sign=virgo&day=today", {
        method: "GET",
        headers: { "Content-Type": "application/json" }, mode: 'no-cors'
      }).then(response => response.json())
   .then(json =>{console.log(JSON.stringify(json)); return JSON.stringify(json)});
     
      }
      console.log(horos());
      fetch("https://horoscope-app-api.vercel.app/api/v1/get-horoscope/daily?sign=virgo&day=today", {
  method: "GET",
  headers: { "Content-Type": "application/json" },
})  .then((res) => res.json())
  .then((json) => console.log(json));
 

      const span_h = document.getElementById("aig_h");
      const span_m = document.getElementById("aig_m");
      const span_s = document.getElementById("aig_s");
      const span_horloge = document.getElementById("horloge");
      const span_date = document.getElementById("date");
      const options = {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
      };
      function clock() {
        var today = new Date();
        hrs = today.getHours();
        if (hrs < 12) greet = "Bonjour";
        else if (hrs >= 12 && hrs <= 17) greet = "Bon après midi ";
        else if (hrs >= 17 && hrs <= 24) greet = "Bonne soirée  ";
        span_date.innerHTML =
          greet +
          " nous sommes le " +
          today.toLocaleDateString("fr-FR", options);
        span_horloge.innerText =
          zeros(today.getHours()) +
          ":" +
          zeros(today.getMinutes()) +
          ":" +
          zeros(today.getSeconds());
        var h = ((today.getHours() % 12) + today.getMinutes() / 59) * 30; // 22 % 12 = 10pm
        span_h.style.transform = `rotate(${h}deg)`;
        span_m.style.transform = "rotate(" + today.getMinutes() * 6 + "deg)";
        span_s.style.transform = "rotate(" + today.getSeconds() * 6 + "deg)";
      }
      function currentWeek(){
        currentDate = new Date();
        startDate = new Date(currentDate.getFullYear(), 0, 1);
        var days = Math.floor((currentDate - startDate) /
            (24 * 60 * 60 * 1000)); 
        document.getElementById("semaine").innerHTML= "S"+Math.ceil(days / 7);
    }
      // adds zero infront of single digit number
      function zeros(num) {
        if (num < 10) {
          num = "0" + num;
        }
        return num;
      }

      function dateTime() {
        clock();
        currentWeek();
        setTimeout(dateTime, 500);
      }

      dateTime();
      // END
    </script>
    <!-- forcast -->
    <script>
      !(function (d, s, id) {
        var js,
          fjs = d.getElementsByTagName(s)[0];
        if (!d.getElementById(id)) {
          js = d.createElement(s);
          js.id = id;
          js.src = "https://weatherwidget.io/js/widget.min.js";
          fjs.parentNode.insertBefore(js, fjs);
        }
      })(document, "script", "weatherwidget-io-js");
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
